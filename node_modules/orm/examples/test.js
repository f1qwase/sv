var orm = require("../lib/ORM");

// orm.connect("pg://dresende@localhost:/orm_test?ssl=yes", function (err, db) {
orm.connect("mysql://root:tedua@localhost/orm", function (err, db) {
// orm.connect("mongodb:///test", function (err, db) {
// orm.connect("sqlite://", function (err, db) {
	if (err) {
		throw err;
	}

	var Category = db.define('category', {

	});
	var Product = db.define('product', {

	});
	var PropertyValue = db.define('property_value', {

	});
	Product.hasMany("property_value", PropertyValue);
	Category.hasMany("product", Product);

	var category_id = 812;
    var categoryInstance = Category(category_id);
    var productCount = categoryInstance.getProduct();
    productCount.hasPropertyValue(4564);
    productCount.count(function (err, count) {
        console.log(err, count);
    });

	// db.settings.set("properties.primary_key", "PESSOA");

	// var Person = db.define("person", {
	// 	name      : String,
	// 	surname   : String,
	// 	continent : [ 'Europe', 'Asia', 'Africa', 'America' ],
	// 	age       : Number,
	// 	weight    : Number,
	// 	dt        : Date
	// }, { cache: false });

	// Person.aggregate().distinct('continent').get(function (err, continent) {
	// 	console.log("err", err);
	// 	console.log("continent", continent);
	// });
});
